# 列类型

---

## 列类型概述

  * MySQL数据库提供了非常丰富的列类型，用于限定在指定列上可以保存的数据的格式：
 （1）数字类型
 （2）布尔类型
 （3）字符串类型
 （4）日期时间类型

## 数字类型

  * 为了节省存储空间，同时又必须保证可以存储下足够大的数值，MySQL中定义了多种数值类型：
    （1）**TINYINT**
    占用1个字节存储空间，表示范围-128~127
    （2）**SMALLINT**
    占用2个字节存储空间，表示范围-32768~32767
    （3）**INT**
    占用4个字节，表示范围-2147483648~2147483647
    （4）**BIGINT**
    占用8个字节，表示范围-9223372036854775808~9223372036854775807
  * 数值类型除了可以存储整数，还可以存储小数：
    （5）**FLOAT[(M,D)]**
      >M表示总有效位数，D表示小数点后面允许的有效位数

      单精度浮点数，占用4个字节存储空间。

    （6）**DOUBLE[(M,D)]**
      双精度浮点数，占用8个字节存储空间。
    （7）**DECIMAL[(M,D)]**
      严格定点数，用于保存精确小数。

## 布尔类型

  * 布尔类型，可以表示“真/假”、“是/否”的类型，如用户是否当前是否在线、商品是否特价、帖子是否置顶显示、建议是否已被处理等等：
    (1)**BOOL/BOOLEAN**
    取值只能为 TRUE 或者 FALSE
    >注意：
    >TRUE 和 FALSE 是系统关键词，不能用引号括起来！
    >
    >MySQL中的布尔类型在底层等价于TINYINT(1),即长度为1的整型数字，插入数字0视为FALSE，插入非0数字视为TRUE。

## 字符串类型

  * MySQL中的字符串必需用英文单引号或者双引号括起来，有如下几种类型：
    （1）**CHAR(M)**
    固定长度字符串，长度最大为255个字符串
    （2）**VARCHAR(M)**
    长度可变的字符串，长度最大为65535个字符串
    （3）TEXT(M)
    长度可变的字符串，长度最大可以到2^32，即4G个字符

## 日期时间类型

  * MySQL中的日期时间数据必需用英文单引号或者双引号括起来，常用的有如下几种类型：
    （1）**DATE**
    日期时间类型，支持的范围是'1000-01-01'到'9999-12-31'
    （2）**TIME**
    事件类型，支持的范围是'00:00:00'到'23:59:59'
    （3）DATETIME
    日期时间类型，支持的范围为'1000-01-01 00:00:00'到'9999-12-31 23:59:59'
    >由于不同系统中日期时间类型的表示范围不完全一样，且不同语言区域中的默认日期格式不一样，推荐使用BIGINT来存储日期时间。

### 创建学子商城中的笔记本电脑表

  * 经过分析可知，学子商城中需要创建“笔记本电脑表”，试着根据下述需要保存的数据创建出该表：
    编号、主标题、副标题、价格、服务层诺、规格颜色、商品名称、操作系统、内存容量、分辨率、显卡型号、处理器、显存容量、所属分类、硬盘容量及类型、产品详细说明、上架时间、已售出的数量、是否促销中

# 列约束

---

## 概述

  * 约束：Constraint，指表中特定列上出现的所有数据必须满足特定的内容要求，如果插入的新数据行中的数据不满足该条件，那么该记录就无法成功插入。
  * 例如：
    * 用户名不能为空，且不能重复
    * 语文成绩必需大于0且小于100
    * 性别只能为男或女
    * 员工所在的部门编号必须真实存在
    * ...

## 主键约束

  * 主键约束：PRIMARY KEY，声明为主键的列，值不能为空，且必须唯一。

    ```sql
    CREATE TABLE user (
      uid INT PRIMARY KEY,
      ...
    );
    ```

    >表中所有的数据行默认按照主键列上的值由小到大排列存储，故一个表中最多只能有一个列声明为“主键列”；推荐为每个表都设置一个主键列。

  * 若主键列是整数类型，则同时可以声明此列上的值为“自动增长”——若插入数据时未指定值或者指定为NULL值，则默认就会生成一个在当前最大值基础上+1的下一个整数值。

    ```sql
    CREATE TABLE user(
      uid INT PRIMARY KEY AUTO_INCREMENT,uname VARCHAR(32)
    );
    ```

    ```sql
    INSERT INTO user VALUES(50,'tom');
    INSERT INTO user VALUES(NULL,'mary');#51
    INSERT INTO user(uname) VALUES('joe');#52
    ```

## 唯一约束

  * 唯一：UNIQUE,限定指定列上的值不能出现重复值

    ```sql
    CREATE TABLE user(
      ...
      loginName VARCHAR(32) UNIQUE,
      ...
    );
    ```

    >声明为唯一约束的列上可以出现 NULL 值，且可以出现多个 NULL。

## 非空约束

  * 非空：NOT NULL,限定指定列上的值不能为NULL

    ```sql
    CREATE TABLE user(
      ...
      loginPwd VARCHAR(32) NOT NULL,
      ...
    )
    ```

    >NULL 和""等价吗？

## 检查约束

  * 检查：CHECK,限定指定列上的值不能为NULL

    ```sql
    CREATE TABLE user(
      ...
      sex CHAR(1) CHECK (sex='男' OR sex='女'),
      ...
    )
    ```

    >注意：MySQL的初始InnoDB引擎默认不会执行检查约束

## 外键约束

  * 外键：FOREIGN KEY,外键列上出现的值必须在其参考的表的主键列上出现过。
    >外键列上允许出现重复值和空值
  * 声明外键列，需要使用 FOREIGN KEY 关键字指定外键列，并使用 REFERENCES 关键字指定其参考的列：

    ```sql
    CREATE TABLE dept(
      did INT PRIMARY KEY,#部门表的主键
      ...
    );
    ```

    ```sql
    CREATE TABLE emp(
      eid INT PRIMARY KEY,
      ...,
      deptId INT,
      FOREIGN KEY(deptId) REFERENCES dept(did)
    )
    ```

    >声明外键列
    >指定外键列参考的列

## 默认值约束

  * 默认值：DEFAULT,指定当列上未明确指定值时所使用的默认值

    ```sql
    CREATE TABLE userOrder(
      oid INT PRIMARY KEY,
      price DECIMAL(10,2) DEFAULT 0,
      status VARCHAR(32) DEFAULT '等待付款'
    );
    ```

    ```sql
    #插入数据行时使用默认值
    INSERT INTO userOrder VALUES(9513,DEFAULT,DEFAULT);
    ```

    ```sql
    #插入数据行时未明确指定值的列将使用默认值
    INSERT INTO userOrder(oid) VALUES(9514)
    ```

### 创建学子商城中必需的表

  * 经过分析可知，学子商城中需要创建“笔记本电脑型号表”、“笔记本电脑表”，“笔记本图片表”，试着根据项目需求，设计出这些表结构及列上的约束。